# =============================================================================
# Nami AI Service Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Never commit this file with real secrets to version control

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Telegram Bot Configuration
# Get this from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# OpenAI API Configuration
# Get this from https://platform.openai.com/api-keys
# Must have GPT-4 Vision access
OPENAI_API_KEY=sk-your_openai_api_key_here

# Anthropic API Configuration
# Get this from https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here

# Optional: Custom Anthropic API endpoint
# Use this for proxy services or alternative endpoints
ANTHROPIC_BASE_URL=https://api.anthropic.com

# Optional: Custom Anthropic auth token
# Use this instead of API key if required by your proxy service
ANTHROPIC_AUTH_TOKEN=

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test-specific Anthropic API key
# If set to 'mock-key' or not set, tests will use mock responses
# If set to a real API key, tests will make real API calls (consumes credits)
TEST_ANTHROPIC_KEY=mock-key

# Backend API Configuration
# URL of the backend API service
BACKEND_BASE_URL=http://localhost:3000

# Backend Authentication
# HMAC secret for signing requests to backend
# Must be at least 16 characters long
BACKEND_SIGNING_SECRET=your_minimum_16_character_secret

# Service Configuration
# Public URL of this AI service (for webhooks)
SERVICE_BASE_URL=http://localhost:8081

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Server Configuration
# Port for the service to listen on
PORT=8081

# Security Configuration
# Comma-separated list of allowed Telegram chat IDs
# Leave empty to allow all chats (not recommended for production)
ALLOWED_CHAT_IDS=

# Localization Configuration
# Default timezone for date parsing
DEFAULT_TIMEZONE=Asia/Ho_Chi_Minh

# =============================================================================
# OPERATIONAL CONFIGURATION
# =============================================================================

# Logging Configuration
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Telegram Bot Mode
# Set to 'true' to use webhook mode instead of polling
# Webhook mode is recommended for production
TELEGRAM_WEBHOOK_MODE=false

# Development Mode
# Set to 'true' to prevent actual API calls (for testing)
# When enabled, the bot will respond but not call external APIs
TELEGRAM_DRY_RUN=false

# Environment
# Node environment: development, staging, production
NODE_ENV=development

# =============================================================================
# EXAMPLES
# =============================================================================

# Development example:
# PORT=8081
# LOG_LEVEL=debug
# TELEGRAM_WEBHOOK_MODE=false
# TELEGRAM_DRY_RUN=true
# ALLOWED_CHAT_IDS=123456789

# Production example:
# PORT=8081
# LOG_LEVEL=warn
# TELEGRAM_WEBHOOK_MODE=true
# TELEGRAM_DRY_RUN=false
# ALLOWED_CHAT_IDS=123456789,987654321
# NODE_ENV=production

# =============================================================================
# CONFIGURATION VALIDATION
# =============================================================================

# The service will validate these requirements at startup:
#
# 1. TELEGRAM_BOT_TOKEN must be a valid Telegram bot token
#    - Format: numbers:letters:characters
#    - Example: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
#
# 2. OPENAI_API_KEY must be a valid OpenAI API key
#    - Must start with 'sk-'
#    - Must be at least 20 characters long
#
# 3. BACKEND_BASE_URL must be a valid URL
#    - Must start with http:// or https://
#
# 4. BACKEND_SIGNING_SECRET must be at least 16 characters
#    - Used for HMAC-SHA256 signing
#    - Should be random and securely stored
#
# 5. SERVICE_BASE_URL must be a valid URL
#    - Public URL where this service is accessible
#    - Used for Telegram webhook registration
#
# 6. ALLOWED_CHAT_IDS (if provided) must be valid numbers
#    - Comma-separated list of Telegram chat IDs
#    - Get your chat ID by sending a message to your bot and checking updates
#
# 7. PORT must be between 1 and 65535
#    - Default: 8081
#
# If validation fails, the service will not start and display an error message.